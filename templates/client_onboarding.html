{% extends "base.html" %}

{% block title %}Nouveau Client - Workflow CIF{% endblock %}

{% block content %}

<!-- Barre de progression permanente -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <h6 class="mb-3">Progression du Workflow</h6>
                <div class="progress mb-2" style="height: 10px;">
                    <div class="progress-bar bg-primary" role="progressbar" style="width: 25%"></div>
                </div>
                <div class="d-flex justify-content-between small text-muted">
                    <span><strong>1. DER</strong> (en cours)</span>
                    <span>2. Documents</span>
                    <span>3. Questionnaire</span>
                    <span>4. Documents finaux</span>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="row justify-content-center">
    <div class="col-lg-6">
        <div class="card">
            <div class="card-header">
                <h3 class="mb-0">
                    <i class="fas fa-user-plus me-2"></i>
                    Nouveau Client - Informations de Base
                </h3>
                <p class="text-muted mb-0">Étape 1/4 - Informations essentielles pour générer le DER</p>
            </div>
            
            <div class="card-body">
                <form method="POST" novalidate>
                    <!-- Informations Obligatoires -->
                    <div class="mb-4">
                        <h5 class="text-primary mb-3">
                            <i class="fas fa-user me-2"></i>Informations Obligatoires
                        </h5>
                        
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="nom" class="form-label">Nom *</label>
                                <input type="text" class="form-control" id="nom" name="nom" required>
                            </div>
                            
                            <div class="col-md-6">
                                <label for="prenom" class="form-label">Prénom *</label>
                                <input type="text" class="form-control" id="prenom" name="prenom" required>
                            </div>
                            
                            <div class="col-12">
                                <label for="email" class="form-label">Adresse Email *</label>
                                <input type="email" class="form-control" id="email" name="email" required>
                            </div>
                            
                            <div class="col-md-6">
                                <label for="telephone" class="form-label">Téléphone *</label>
                                <input type="tel" class="form-control" id="telephone" name="telephone" required>
                            </div>
                            
                            <div class="col-md-6">
                                <label for="ville" class="form-label">Ville *</label>
                                <input type="text" class="form-control" id="ville" name="ville" required>
                            </div>
                            
                            <div class="col-12">
                                <label for="date_entree_relation" class="form-label">Date d'Entrée en Relation *</label>
                                <input type="date" class="form-control" id="date_entree_relation" name="date_entree_relation" required>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Informations Légales -->
                    <div class="mb-4">
                        <h5 class="text-primary mb-3">
                            <i class="fas fa-gavel me-2"></i>Informations Légales
                        </h5>
                        
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="consentement_rgpd" required>
                            <label class="form-check-label" for="consentement_rgpd">
                                <strong>Consentement RGPD *</strong><br>
                                <small class="text-muted">
                                    J'accepte que mes données personnelles soient collectées et traitées dans le cadre 
                                    de la prestation de conseil en investissement financier, conformément au RGPD.
                                </small>
                            </label>
                        </div>
                        
                    </div>
                    
                    <!-- Boutons d'action -->
                    <div class="d-flex justify-content-between">
                        <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">
                            <i class="fas fa-arrow-left me-2"></i>Retour
                        </a>
                        
                        <button type="submit" class="btn btn-primary">
                            Créer le Client et Générer le DER <i class="fas fa-arrow-right ms-2"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Workflow Progress -->
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Set today's date as default for date_entree_relation
    const dateField = document.getElementById('date_entree_relation');
    if (dateField) {
        const today = new Date();
        const year = today.getFullYear();
        const month = String(today.getMonth() + 1).padStart(2, '0');
        const day = String(today.getDate()).padStart(2, '0');
        dateField.value = `${year}-${month}-${day}`;
    }
});
</script>
{% endblock %}
